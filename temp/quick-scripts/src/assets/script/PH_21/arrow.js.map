{"version":3,"sources":["assets\\script\\PH_21\\arrow.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.Node)\n    target: cc.Node = null\n    param = 100\n    start() {\n\n    }\n\n    checkAngle() {\n        if (this.target != null) {\n            let posHero = cc.Canvas.instance.node.getComponent(\"Game21\").hero.position\n            let target = this.target;\n            // let pos2 = target.position.add(cc.v3(-this.camera.position.x,- this.camera.position.y))\n            let pos2 = target.position\n\n            pos2 = target.parent.convertToWorldSpaceAR(pos2);\n            pos2 = this.node.parent.convertToNodeSpaceAR(pos2);\n            let pos = this.node.position\n            let tan = (pos2.x - pos.x !== 0) ? (pos2.y - pos.y - 30) / (pos2.x - pos.x) : 0\n            let angle = Math.atan(tan) * (180 / (Math.PI));\n            angle = (pos.x <= pos2.x) ? angle : angle + 180;\n            let param = this.param;\n            let angle2 = this.checkAngle2(posHero, pos2)\n            angle2 = cc.misc.degreesToRadians(angle2)\n            let pos3 = posHero.add(cc.v3(param * Math.cos(angle2), param * Math.sin(angle2)))\n            this.node.position = pos3\n            // console.log()\n            // this.node.scaleX = (pos.x <= target.x) ? 0.5 : -0.5;\n            return angle;\n\n\n\n\n        }\n    }\n    checkPos() {\n        let target = this.target;\n        let son = this.node.parent\n        let pos2 = target.position\n\n        pos2 = target.parent.convertToWorldSpaceAR(pos2);\n        pos2 = son.parent.convertToNodeSpaceAR(pos2);\n\n\n\n\n        // if(son.y>=pos2.y){\n        // if (son.x <= pos2.x) {\n        // this.node.position = cc.v3(138, 66)\n\n        // } else if (son.x > pos2.x) {\n        // }\n        // this.node.position = cc.v3(165, 66)\n\n        // }\n        // else{\n        //     if (son.x > pos2.x) {\n        //         this.node.position = cc.v3(138, 66)\n\n        //     } else if (son.x < pos2.x) {\n        //         this.node.position = cc.v3(165, 66)\n        //     }\n        // }\n\n\n    }\n    checkAngle2(pos1, pos2) {\n        let tan = Math.abs(pos2.y - pos1.y) / Math.abs(pos2.x - pos1.x);\n        if (pos2.y == pos1.y) {\n            if (pos2.x > pos1.x) return 0;\n            if (pos2.x < pos1.x) return 180;\n        }\n\n        if (pos2.x == pos1.x) {\n            if (pos2.y > pos1.y) return 90;\n            if (pos2.y < pos1.y) return -90;\n        }\n        if (pos1.x == pos2.x && pos1.y == pos2.y) return 0;\n        if (pos1.x !== pos2.x && pos1.y !== pos2.y) {\n            if (pos2.x > pos1.x && pos2.y > pos1.y) return cc.misc.radiansToDegrees(Math.atan(tan));\n            if (pos2.x > pos1.x && pos2.y < pos1.y) return cc.misc.radiansToDegrees(Math.atan(tan)) * -1;\n            if (pos2.x < pos1.x && pos2.y > pos1.y) return (180 - cc.misc.radiansToDegrees(Math.atan(tan)));\n            if (pos2.x < pos1.x && pos2.y < pos1.y) return -(180 - cc.misc.radiansToDegrees(Math.atan(tan)));\n        }\n    }\n    update(dt) {\n        this.node.angle = this.checkAngle();\n        // this.checkPos()\n        // this.icon.angle = -this.node.angle;\n\n    }\n}\n"]}