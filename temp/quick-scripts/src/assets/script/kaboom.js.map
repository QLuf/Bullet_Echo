{"version":3,"sources":["assets\\script\\kaboom.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport { Constant } from \"./Constant\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(sp.Skeleton)\n    bodySkeleton: sp.Skeleton = null;\n\n    @property(cc.CircleCollider)\n    bodyCollider: cc.CircleCollider = null;\n\n    @property(cc.CircleCollider)\n    rangeCollider: cc.CircleCollider = null;\n\n    @property(cc.Prefab)\n    heroBullet: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    effect: cc.Prefab = null;\n\n    @property(cc.Node)\n    kameBeam: cc.Node = null;\n\n    // @property(cc.Prefab)\n    // heroKnife: cc.Prefab = null;\n\n    // @property(cc.Prefab)\n    // heroArrow: cc.Prefab = null;\n\n    // @property(cc.Prefab)\n    // fireBall: cc.Prefab = null;\n\n    @property(cc.Sprite)\n    blood: cc.Sprite = null;\n\n    @property(cc.Integer)\n    hp = 500;\n\n    @property(cc.Integer)\n    damage = 50;\n\n    @property(cc.AudioClip)\n    atkSound: cc.AudioClip = null;\n\n    moveDir = null;\n\n    directionX = null;\n\n    isRun = false;\n\n    isDie = false;\n\n    speed = 250;\n\n    maxHp = 0;\n\n    enemyArr = [];\n\n    isAttack = false;\n\n    gamePlay = null;\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n        this.maxHp = this.hp;\n        this.gamePlay = cc.Canvas.instance.node.getComponent('GamePlay_2');\n    }\n    run() {\n        if (!this.isRun && !this.isDie) {\n            this.isRun = true;\n            this.bodySkeleton.setAnimation(0, 'fly', true);\n            this.kameBeam.active = true;\n        }\n    }\n    idle() {\n        if (!this.isRun && !this.isDie) {\n            this.bodySkeleton.setAnimation(0, 'fly idle', true);\n            this.kameBeam.active = false;\n        }\n    }\n    stop() {\n        if (!this.isDie) {\n            this.isRun = false;\n            this.bodySkeleton.setAnimation(0, 'idle', true);\n            this.kameBeam.active = false;\n        }\n    }\n    attack() {\n        if (this.enemyArr.length > 0) {\n            if (!this.isAttack) {\n                this.isAttack = true;\n                this.bodySkeleton.schedule(() => {\n                    //ss2 skill Flame\n                    this.Flame();\n                }, 2, cc.macro.REPEAT_FOREVER, 0);\n            }\n        }\n    }\n    attacked(damage) {\n        if (this.isDie) return;\n        this.hp -= damage;\n        if (this.hp <= 0) {\n            this.hp = 0;\n            this.bodyCollider.enabled = false;\n            this.isDie = true;\n            this.node.stopAllActions();\n            this.node.getChildByName('holyRing').active = false;\n            this.bodySkeleton.setAnimation(0, 'die', false);\n            this.unscheduleAllCallbacks();\n            this.bodySkeleton.unscheduleAllCallbacks();\n            this.changeAnimation();\n            this.gamePlay.joyStick.getComponent('Joystick').touchEndEvent();\n            this.gamePlay.joyStick.active = false;\n            // cc.Canvas.instance.node.emit(Constant.EVENT.END_GAME, false);\n        }\n        this.blood.fillRange = this.hp / this.maxHp;\n    }\n    removeEnemy(idEnemy) {\n        this.enemyArr.forEach((enemy, index) => {\n            if (enemy._id == idEnemy) this.enemyArr.splice(index, 1);\n        })\n        if (this.enemyArr.length == 0) {\n            // this.bodySkeleton.unscheduleAllCallbacks();\n            this.idle();\n        }\n    }\n\n    Flame() {\n        this.showEffect(\"flame_2\", this.node);\n        if (this.enemyArr.length > 0) {\n            for (let j = 0; j < this.enemyArr.length; j++) {\n                cc.audioEngine.play(this.atkSound, false, 0.5);\n                this.showEffect(\"flame_3\", this.enemyArr[j]);\n            }\n        }\n    }\n\n    showEffect(name, parent) {\n        // if (this.isEnd) return;\n        let effect = cc.instantiate(this.effect);\n        parent.addChild(effect);\n        effect.getComponent(\"effect\").play(name);\n        effect.zIndex = 100;\n        return effect;\n    }\n\n    // shootKnife() {\n    //     this.bodySkeleton.schedule(() => {\n    //         for (let i = 0; i < 1; i++) {\n    //             if (this.enemyArr.length > 1) {\n    //                 let bullet = cc.instantiate(this.heroKnife);\n    //                 let pos2 = this.enemyArr[1].position.add(cc.v3(50 * i, 50 * i));\n    //                 let pos = (this.bodySkeleton.node.scaleX < 0) ? this.node.position.add(cc.v3(0, 30)) : this.node.position.add(cc.v3(0, 30));\n    //                 let angle = this.checkAngle(this.enemyArr[1])\n    //                 this.createBullet(bullet, angle, pos, pos2,0.35)\n    //             }\n    //         }\n    //     }, 0.25, cc.macro.REPEAT_FOREVER, 0.5)\n    // }\n    // skillFireBall() {\n    //     this.schedule(() => {\n    //         for (let i = 0; i < 1; i++) {\n    //             if (this.enemyArr.length > 1) {\n    //                 let bullet = cc.instantiate(this.fireBall);\n    //                 bullet.zIndex = 5;\n    //                 bullet.scaleX = (this.enemyArr[1].position.x < 0) ? 0.1 : -0.1\n    //                 let pos2 = this.enemyArr[1].position;\n    //                 let pos = this.enemyArr[1].position.add(cc.v3((this.enemyArr[1].position.x < 0) ? 500 : -500, (this.enemyArr[1].position.y < 0) ? 500 : 500))\n    //                 let angle = 0\n    //                 this.createBullet(bullet, angle, pos, pos2, 0.75)\n    //             }\n    //         }\n    //     }, 0.4, cc.macro.REPEAT_FOREVER, 0);\n    // }\n    // skillKnife(pos) {\n    //     for (let i = 0; i < 4; i++) {\n    //         let bullet = cc.instantiate(this.heroKnife);\n    //         let angle = -135 + 90 * i\n    //         let angleR = angle * (Math.PI) / 180\n    //         // bullet.angle = angle * 180 / Math.PI + 90;\n    //         bullet.getComponent('bullet').isKnife = false;\n    //         bullet.getComponent(cc.CircleCollider).enabled = false;\n    //         let param = (bullet.scaleX < 0) ? -1000 : 1000\n    //         let pos2 = pos.add(cc.v3(param * Math.cos(angleR), param * Math.sin(angleR)))\n    //         this.scheduleOnce(() => {\n    //             bullet.getComponent(cc.CircleCollider).enabled = true;\n    //         }, 0.15)\n    //         this.createBullet(bullet, angle, pos, pos2, 1);\n    //     }\n    // }\n    // skillIceArrow() {\n    //     this.schedule(() => {\n    //         for (let i = 0; i < 10; i++) {\n    //             let bullet = cc.instantiate(this.heroArrow);\n    //             let angleR = (-Math.PI) + (Math.PI * i / 5);\n    //             let pos = this.node.position.add(cc.v3(0, 30));\n    //             let angle = angleR * 180 / Math.PI\n    //             let param = (bullet.scaleX < 0) ? -1000 : 1000\n    //             let pos2 = pos.add(cc.v3(param * Math.cos(angleR), param * Math.sin(angleR)))\n    //             this.createBullet(bullet, angle, pos, pos2, 1);\n    //         }\n    //     }, 1, cc.macro.REPEAT_FOREVER, 1);\n    // }\n    createBullet(bullet, angle, pos, pos2, speed = 0.25) {\n        this.node.parent.addChild(bullet);\n        // bullet.getComponent('bulletHeroListener').setDame(this.damage);\n        bullet.angle = angle\n        bullet.setPosition(pos);\n        // console.log(angle);\n        let param = (this.bodySkeleton.node.scaleX < 0) ? -1000 : 1000;\n        this.scheduleOnce(() => {\n            bullet.getChildByName('trail1').active = true;\n        }, 0.05)\n        cc.tween(bullet).to(speed, { position: pos2 }).call(() => {\n            bullet.getChildByName('explode').active = true;\n            bullet.getChildByName('icon').active = false;\n            this.scheduleOnce(() => {\n                bullet.destroy();\n            }, 0.12);\n        }).start();\n    }\n    checkAngle(targetEnemy) {\n        if (this.enemyArr.length > 0 && this.enemyArr) {\n            let target = targetEnemy;\n            let tan = (target.x - this.node.x !== 0) ? (target.y - this.node.y - 30) / (target.x - this.node.x) : 0\n            let angle = Math.atan(tan) * (180 / (Math.PI));\n            angle = (this.node.x <= target.x) ? angle : angle + 180\n            return angle;\n        }\n    }\n    changeAnimation() {\n        this.bodySkeleton.setCompleteListener(track => {\n            let anim = (track.animation) ? track.animation.name : '';\n            if (anim == 'die') {\n                this.node.active = false;\n                cc.Canvas.instance.node.emit(Constant.EVENT.END_GAME, false);\n            }\n        })\n    }\n\n    update(dt) {\n        if (this.moveDir && this.directionX && this.isRun && !this.isDie) {\n            let newPos = this.node.position.add(this.moveDir.mul(this.speed / 60));\n            this.node.setPosition(newPos.clampf(cc.v3(-700, -750), cc.v3(700, 750)));\n        }\n        if (this.enemyArr.length > 0 && this.enemyArr && !this.isDie) {\n            let target = this.enemyArr[0];\n            if (target.x >= this.node.x + 20) {\n                this.bodySkeleton.node.scaleX = -0.1;\n            }\n            else {\n                this.bodySkeleton.node.scaleX = 0.1;\n            }\n        }\n    }\n}\n"]}