{"version":3,"sources":["assets\\script\\enemy\\darkOctopus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport enemy from \"../enemy\"\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends enemy {\n    @property(cc.Prefab)\n    atk_around: cc.Prefab = null;\n    @property(cc.Prefab)\n    atk_down: cc.Prefab = null;\n    @property(cc.Prefab)\n    preBullet: cc.Prefab = null;\n    countAtk = 0;\n    @property(cc.AudioClip)\n    atkSOund: cc.AudioClip = null\n    isCountDowskill = false\n\n    attack(target) {\n        this.isMeet = true;\n        let targetComp = target.getComponent('hero');\n        // targetComp.attacked(this.damage);\n        this.anim.scheduleOnce(() => {\n            targetComp.attacked(this.damage);\n\n        }, 0.3)\n        this.atkList(target)\n\n        this.anim.schedule(() => {\n            if (this.isMeet) {\n                this.atkList(target)\n                this.anim.scheduleOnce(() => {\n                    targetComp.attacked(this.damage);\n\n                }, 0.3)\n            }\n        }, 1.2, cc.macro.REPEAT_FOREVER, 0.6);\n    }\n    atkList(target) {\n        this.anim.play(\"atk\")\n        if (!this.isCountDowskill) {\n            this.isCountDowskill = true;\n            cc.audioEngine.play(this.atkSOund, false, 0.8)\n            this.scheduleOnce(() => {\n                this.isCountDowskill = false;\n\n            }, 0.2)\n        }\n        switch (this.countAtk) {\n            case 2:\n                this.countAtk = 0;\n                this.doubleAtk(target)\n                break;\n            case 1:\n                this.countAtk++\n                this.createAtkAround(target)\n                this.btn_skillCircle()\n                break;\n            default:\n                this.countAtk++;\n                this.createAtkDown(target)\n                break;\n        }\n    }\n    doubleAtk(target) {\n        for (let i = 0; i < 2; i++) {\n            let atk = cc.instantiate(this.atk_down);\n            atk.parent = this.node.parent.parent.parent;\n            let pos = target.parent.convertToWorldSpaceAR(target.position);\n            pos = this.node.parent.parent.parent.convertToNodeSpaceAR(pos);\n            atk.position = pos;\n            atk.scaleX = ((i == 0) ? -1 : 1) * atk.scaleX;\n            atk.zIndex = 2;\n        }\n    }\n\n    createAtkDown(target) {\n        let atk = cc.instantiate(this.atk_down)\n        atk.parent = this.node.parent.parent;\n        let pos = target.parent.convertToWorldSpaceAR(target.position);\n        pos = this.node.parent.parent.convertToNodeSpaceAR(pos)\n        atk.scaleX = ((pos.x > this.node.x) ? -1 : 1) * atk.scaleX\n        atk.position = pos\n        atk.zIndex = 2\n\n\n    }\n    createAtkAround(target) {\n        let atk = cc.instantiate(this.atk_around)\n        atk.parent = this.node.parent.parent;\n        let pos = target.parent.convertToWorldSpaceAR(target.position);\n        pos = this.node.parent.parent.convertToNodeSpaceAR(pos)\n        atk.position = pos\n        atk.zIndex = 2\n    }\n    exitTarget() {\n      \n\n        if(this.arrHero.length<=0){\n            this.isMeet = false;\n            this.anim.play(\"idle\")\n            // this.bodySkeleton.unscheduleAllCallbacks();\n            this.anim.unscheduleAllCallbacks();\n        }\n    }\n    update(dt: any): void {\n\n    }\n    btn_skillCircle() {\n        // for (let i = 0; i < 12; i++) {\n        //     let rd = Math.floor(Math.random() * 2)\n\n        //     let bullet = cc.instantiate(this.preBullet);\n        //     let angle = (-Math.PI) + (Math.PI * i / 6);\n        //     let pos = cc.v3(0, 0);\n        //     this.node.addChild(bullet);\n        //     bullet.zIndex=cc.macro.MIN_ZINDEX\n        //     bullet.setPosition(pos.add(cc.v3(0, -50)));\n        //     // bullet.getChildByName(\"circle\").children[0].color = new cc.Color().fromHEX(\"#4ED3EC\");\n        //     bullet.scale = 0.4\n        //     let param = (this.node.scaleX < 0) ? (-400 - 50 * rd) : (400 + 50 * rd)\n        //     cc.tween(bullet).to(1, { position: cc.v3(param * Math.cos(angle), param * Math.sin(angle)).add(cc.v3(0, -50)) }).call(() => {\n        //         // bullet.getComponent(cc.Animation).play()\n        //    bullet.destroy()\n        //     }).start();\n        // }\n\n    }\n}\n"]}